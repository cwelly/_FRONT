{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport http from \"@/util/http-common\";\nexport default {\n  name: 'HelloWorld',\n  data() {\n    return {\n      isDongSearch: true,\n      map: Object\n    };\n  },\n  methods: {\n    goSearchByAddr() {\n      let sidoSel = document.querySelector(\"#sido\");\n      let sido = sidoSel.options[sidoSel.selectedIndex].text;\n      let gugunSel = document.querySelector(\"#gugun\");\n      let gugun = gugunSel.options[gugunSel.selectedIndex].text;\n      let dongSel = document.querySelector(\"#dong\");\n      let dong = dongSel.options[dongSel.selectedIndex].text;\n      if (sido == \"시도선택\" || gugun == \"구군선택\" || dong == \"동선택\") {\n        alert(\"시/도 , 구/군 , 동을 정확히 설정해주세요!\");\n        console.log(sido, gugun, dong);\n        return;\n      }\n      // let url = `/WhereIsMyHome/map.do?action=searchDong&sido=${sido}&gugun=${gugun}&dong=${dong}`;\n      // let url = ctx+`/map.do/searchDong/${sido}/${gugun}/${dong}`;\n      // console.log(url);\n      http.get(`/map.do/searchDong/${dong}`).then(({\n        data\n      }) => {\n        console.log(data);\n        this.makeList(data);\n      });\n    },\n    toggleSearch() {\n      this.isDongSearch = !this.isDongSearch;\n    },\n    onGugunChanged() {\n      let gugunSel = document.querySelector(\"#gugun\");\n      let gugunCode = gugunSel.options[gugunSel.selectedIndex].value;\n      http.get(`/region.do/dong/${gugunCode}`).then(({\n        data\n      }) => {\n        console.log(data.regions);\n        let dongSel = document.querySelector(\"#dong\");\n        while (dongSel.firstChild) {\n          dongSel.removeChild(dongSel.firstChild);\n        }\n        let init = document.createElement(\"option\");\n        init.textContent = \"동선택\";\n        dongSel.appendChild(init);\n        data.regions.forEach(dong => {\n          let option = document.createElement(\"option\");\n          option.textContent = dong.name;\n          option.value = dong.code;\n          dongSel.appendChild(option);\n        });\n      });\n    },\n    //onGugunChanged\n\n    onSidoChanged() {\n      let sidoSel = document.querySelector(\"#sido\");\n      let sidoCode = sidoSel.options[sidoSel.selectedIndex].value;\n      let dongSel = document.querySelector(\"#dong\");\n      while (dongSel.firstChild) {\n        dongSel.removeChild(dongSel.firstChild);\n      }\n      let init = document.createElement(\"option\");\n      init.textContent = \"동선택\";\n      dongSel.appendChild(init);\n      http.get(`/region.do/gugun/${sidoCode}`).then(({\n        data\n      }) => {\n        console.log(data);\n        let gugunSel = document.querySelector(\"#gugun\");\n        while (gugunSel.firstChild) {\n          gugunSel.removeChild(gugunSel.firstChild);\n        }\n        let init = document.createElement(\"option\");\n        init.textContent = \"구군선택\";\n        gugunSel.appendChild(init);\n        data.regions.forEach(gugun => {\n          let option = document.createElement(\"option\");\n          option.textContent = gugun.name;\n          option.value = gugun.code;\n          gugunSel.appendChild(option);\n        });\n      });\n    },\n    //onSidoChanged\n    showResult() {\n      document.querySelector(\"#aptListSection\").setAttribute(\"style\", \"display: flex;\");\n    },\n    hideResult() {\n      document.querySelector(\"#aptListSection\").setAttribute(\"style\", \"display: none;\");\n    },\n    init() {\n      let map = document.querySelector(\"#map\");\n      map.innerHTML = ``;\n      let tbody = document.querySelector(\"#aptlist\");\n      let len = tbody.rows.length;\n      for (let i = len - 1; i >= 0; i--) {\n        tbody.deleteRow(i);\n      }\n    },\n    makeList(data) {\n      let apts = data.aptList;\n\n      //지도 관련\n\n      var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스\n      var myPos = new kakao.maps.LatLng(36.098594, 128.38977); //lat: 36.098594, lng: 128.38977 }\n      var options = {\n        //지도를 생성할 때 필요한 기본 옵션\n        center: myPos,\n        //지도의 중심좌표.\n        level: 3 //지도의 레벨(확대, 축소 정도)\n      };\n\n      let tbody = document.querySelector(\"#aptlist\");\n      this.init();\n      // if (apts == null) {\n      if (apts.length === 0) {\n        alert(\"검색 내역이 없습니다!\");\n        this.hideResult();\n      } else {\n        this.showResult();\n        let map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴\n        let geocoder = new kakao.maps.services.Geocoder();\n        console.log(apts);\n\n        //주소로 좌표 얻기\n\n        let addressArr = [];\n        let aptArr = [];\n        apts.forEach(apt => {\n          let aptInfo = {};\n          let address = apt[\"sido\"] + \" \" + apt[\"gugun\"] + \" \" + apt[\"dong\"] + apt[\"jibun\"];\n          addressArr.push(address);\n          aptInfo.address = address;\n          aptInfo.aptName = apt[\"apartmentName\"];\n          aptInfo.aptPirce = apt[\"dealAmount\"];\n          aptInfo.aptSize = apt[\"area\"];\n          aptInfo.aptYear = apt[\"buildYear\"];\n          aptArr.push(aptInfo);\n          let tr = document.createElement(\"tr\");\n          let nameTd = document.createElement(\"td\");\n          nameTd.appendChild(document.createTextNode(apt[\"apartmentName\"]));\n          tr.appendChild(nameTd);\n          let floorTd = document.createElement(\"td\");\n          floorTd.appendChild(document.createTextNode(apt[\"buildYear\"]));\n          tr.appendChild(floorTd);\n          let areaTd = document.createElement(\"td\");\n          areaTd.appendChild(document.createTextNode(apt[\"area\"]));\n          tr.appendChild(areaTd);\n          let dongTd = document.createElement(\"td\");\n          dongTd.appendChild(document.createTextNode(apt[\"dong\"]));\n          tr.appendChild(dongTd);\n          let priceTd = document.createElement(\"td\");\n          priceTd.appendChild(document.createTextNode(apt[\"dealAmount\"] + \"만원\"));\n          priceTd.classList.add(\"text-end\");\n          tr.appendChild(priceTd);\n\n          //마커 생성\n          geocoder.addressSearch(aptInfo.address, function (result, status) {\n            // 정상적으로 검색이 완료됐으면 \n            if (status === kakao.maps.services.Status.OK) {\n              var coords = new kakao.maps.LatLng(result[0].y, result[0].x);\n              //아파트 이름,\n              let overlay = this.displayMarker(coords, aptInfo, map);\n\n              //클릭 이벤트\n              tr.addEventListener(\"click\", () => {\n                //클릭시 map에 중심을 바꿔라\n                map.panTo(coords);\n                //클릭시 오버레이 열기\n                overlay.setMap(map);\n              });\n            } else {\n              console.log(\"검색이 안됨\");\n              console.log(aptInfo.address);\n            }\n          });\n          tbody.appendChild(tr);\n        });\n      }\n    },\n    //makelist\n\n    displayMarker(locPosition, aptInfo, map) {\n      // 마커를 생성합니다\n      var marker = new kakao.maps.Marker({\n        map: map,\n        position: locPosition\n      });\n      marker.setMap(map);\n      let mkWrap = document.createElement(\"div\");\n      mkWrap.className = \"markerWrap\";\n      let info = document.createElement(\"div\");\n      info.className = \"info\";\n      let title = document.createElement(\"div\");\n      title.className = \"title\";\n      title.innerHTML = aptInfo.aptName;\n      let closeBtn = document.createElement(\"button\");\n      closeBtn.className = \"close\";\n      closeBtn.setAttribute(\"title\", \"닫기\");\n      title.appendChild(closeBtn);\n      let body = document.createElement(\"div\");\n      body.className = \"body\";\n      body.innerHTML = `<div class=\"desc\" >\n          <div class=\"ellipsis\" style=\"width:100%;height:100%; word-break:break-all;margin-bottom:5px \"><p \">상세주소 : ${aptInfo.address} ${aptInfo.aptName}</p>\n          <p>건축년도 : ${aptInfo.aptYear}</p>\n          <p> 아파트 면적 : ${aptInfo.aptSize}</p>\n          <p>거래 금액 : ${aptInfo.aptPirce}</p>\n          </div>\n      </div>`;\n      info.appendChild(title);\n      info.appendChild(body);\n      mkWrap.appendChild(info);\n      var overlay = new kakao.maps.CustomOverlay({\n        content: mkWrap,\n        map: map,\n        position: marker.getPosition()\n      });\n\n      //오버레이 닫기\n      closeBtn.addEventListener(\"click\", () => {\n        overlay.setMap(null);\n      });\n\n      // 지도 중심좌표를 접속위치로 변경합니다\n      map.setCenter(locPosition);\n\n      //오버레이 열기\n      kakao.maps.event.addListener(marker, 'click', function () {\n        overlay.setMap(map);\n        map.setCenter(locPosition);\n      });\n      closeBtn.dispatchEvent(new Event(\"click\"));\n      return overlay;\n    },\n    //displayMaker\n\n    initMap() {\n      const container = document.getElementById(\"map\");\n      const options = {\n        center: new kakao.maps.LatLng(33.450701, 126.570667),\n        level: 3\n      };\n\n      //지도 객체를 등록합니다.\n      //지도 객체는 반응형 관리 대상이 아니므로 initMap에서 선언합니다.\n      this.map = new kakao.maps.Map(container, options);\n    }\n  },\n  created() {\n    http.get(`/region.do/sido`).then(({\n      data\n    }) => {\n      let sidoSel = document.querySelector(\"#sido\");\n      let init = document.createElement(\"option\");\n      init.textContent = \"시도선택\";\n      sidoSel.appendChild(init);\n      data.regions.forEach(sido => {\n        let option = document.createElement(\"option\");\n        option.textContent = sido.name;\n        option.value = sido.code;\n        sidoSel.appendChild(option);\n      });\n    });\n  },\n  watched: {},\n  computed: {},\n  mounted() {\n    if (!window.kakao || !window.kakao.maps) {\n      const script = document.createElement(\"script\");\n      script.src = \"//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=32b7b36540e75a778fb8400e8a821a41&libraries=services\";\n      /* global kakao */\n      script.onload = () => kakao.maps.load(this.initMap);\n      // script.addEventListener(\"load\", () => {\n      //   console.log(\"loaded\", kakao);\n      //   console.log(\"loaded\", kakao.maps);\n      // });\n      document.head.appendChild(script);\n    } else {\n      console.log(\"이미 로딩됨 : \", window.kakao);\n    }\n    if (window.kakao && window.kakao.maps) {\n      console.log(\"제대로 불러옴\");\n    }\n  }\n};","map":{"version":3,"mappings":";AAiKA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;IACA;EACA;EACAC;IAEAC;MACA;MACA;MAEA;MACA;MAEA;MACA;MAEA;QACAC;QACAC;QACA;MACA;MACA;MACA;MACA;MACAC;QAAAP;MAAA;QACAM;QACA;MACA;IACA;IAEAE;MACA;IACA;IAEAC;MACA;MACA;MACAF;QAAAP;MAAA;QACAM;QACA;QAEA;UACAI;QACA;QAEA;QACAC;QACAD;QAEAV;UACA;UACAY;UACAA;UAEAF;QACA;MACA;IACA;IAAA;;IAEAG;MACA;MACA;MACA;MAEA;QACAH;MACA;MACA;MACAC;MACAD;MACAH;QAAAP;MAAA;QACAM;QACA;QAEA;UACAQ;QACA;QAEA;QACAH;QACAG;QAEAd;UACA;UACAY;UACAA;UAEAE;QACA;MACA;IACA;IAAA;IACAC;MACAC;IACA;IACAC;MACAD;IACA;IACAL;MACA;MACAT;MACA;MACA;MACA;QACAgB;MACA;IACA;IAEAC;MAEA;;MAEA;;MAEA;MACA;MACA;QAAA;QACAC;QAAA;QACAC;MACA;;MAEA;MAEA;MACA;MACA;QACAhB;QACA;MACA;QACA;QAEA;QACA;QAEAC;;QAEA;;QAEA;QACA;QAGAgB;UACA;UAEA;UAEAC;UAEAC;UACAA;UACAA;UACAA;UACAA;UAEAC;UACA;UAEA;UACAC;UACAC;UAEA;UACAC;UACAD;UAEA;UACAE;UACAF;UAEA;UACAG;UACAH;UAEA;UACAI,oBACAf,kDACA;UACAe;UACAJ;;UAEA;UACAK;YACA;YACA;cACA;cACA;cACA;;cAGA;cACAL;gBACA;gBACAzB;gBACA;gBACA+B;cACA;YACA;cACA3B;cACAA;YACA;UACA;UACAY;QACA;MACA;IACA;IAAA;;IAEAgB;MACA;MACA;QACAhC;QACAiC;MACA;MACAC;MAEA;MACAC;MACA;MACAC;MACA;MACAC;MACAA;MACA;MACAC;MACAA;MACAD;MAEA;MACAE;MACAA;AACA;AACA;AACA;AACA;AACA;AACA;MAEAH;MACAA;MACAD;MAGA;QACAK;QACAxC;QACAiC;MACA;;MAEA;MACAK;QACAP;MACA;;MAEA;MACA/B;;MAEA;MACAyC;QACAV;QACA/B;MACA;MACAsC;MACA;IACA;IAAA;;IAEAI;MACA;MACA;QACAxB;QACAC;MACA;;MAEA;MACA;MACA;IACA;EAEA;EACAwB;IACAtC;MAAAP;IAAA;MACA;MACA;MACAW;MAEAmC;MACA9C;QACA;QACAY;QACAA;QAEAkC;MACA;IACA;EACA;EACAC,UAEA;EACAC,WAEA;EACAC;IACA;MACA;MACAC;MACA;MACAA;MACA;MACA;MACA;MACA;MACAlC;IACA,OACA;MACAV;IACA;IACA;MACAA;IACA;EACA;AACA","names":["name","data","isDongSearch","map","methods","goSearchByAddr","alert","console","http","toggleSearch","onGugunChanged","dongSel","init","option","onSidoChanged","gugunSel","showResult","document","hideResult","tbody","makeList","center","level","apts","addressArr","aptInfo","aptArr","nameTd","tr","floorTd","areaTd","dongTd","priceTd","geocoder","overlay","displayMarker","position","marker","mkWrap","info","title","closeBtn","body","content","kakao","initMap","created","sidoSel","watched","computed","mounted","script"],"sourceRoot":"src/components","sources":["HelloWorld.vue"],"sourcesContent":["<template>\n  <div >\n    <header id=\"header\">\n      <div class=\"container-fluid\">\n  \n        <div class=\"logo\">\n          <h1><a href=\"index.html\">홈즈</a></h1>\n        </div>\n  \n        <button type=\"button\" class=\"nav-toggle\"><i class=\"bx bx-menu\"></i></button>\n        <nav class=\"nav-menu\">\n          <ul id=\"menu-item\">\n            <li class=\"active\"><a href=\"#header\" class=\"scrollto\">Home</a></li>\n            <!-- <li><a href=\"#about\" class=\"scrollto\">About Us</a></li> -->\n            <li><a href=\"#notice\" class=\"scrollto\">Notice</a></li>\n            \n            <!--  로그인 했을때 리스트\n              <c:if test=\"${!empty user }\">\n              <li class=\"drop-down\" id=\"user-info\"><a href=\"\">User</a>\n                <ul>\n                  <li><a href=\"#\" data-bs-toggle=\"modal\" data-bs-target=\"#infoModal\">Info</a></li>\n                  <li><a href=\"#\" id=\"logout-btn\">Logout</a></li>\n                  \n                  <li><a href=\"#\" id=\"withdrawal-btn\">Withdrawal</a></li>\n                  <li><a href=\"#\" id=\"noticeAdd-btn\" data-bs-toggle=\"modal\" data-bs-target=\"#noticeModal\" >add notice</a></li>\n                  \n                </ul>\n            </li>\n            </c:if> \n          -->\n            \n            <!--  로그인 안했을때 리스트!\n              <c:if test=\"${empty user }\">\n              <li id=\"login-li\"><a id=\"login-btn\" class=\"scrollto\" type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#loginModal\">Login</a></li>\n              <li id=\"join-li\"><a id=\"join-btn\" class=\"scrollto\" type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#joinModal\">Join</a></li>\n            </c:if>\n           -->\n          </ul>\n        </nav><!-- .nav-menu -->\n        \n      </div>\n    </header>\n\n    <section id=\"hero\">\n      <div class=\"hero-container\">\n        <h1>구해줘 홈즈!</h1>\n        <h2>김우진 최현호</h2>\n  \n        <!-- <form action=\"forms/notify.php\" method=\"post\" role=\"form\" class=\"php-email-form\"> -->\n          <div class=\"row no-gutters\">\n            <!-- <div class=\"col-md-6 form-group pr-md-1\">\n              <input type=\"text\" name=\"name\" class=\"form-control\" id=\"name\" placeholder=\"Your Name\" required>\n            </div>\n            <div class=\"col-md-6 form-group pl-md-1\">\n              <input type=\"email\" class=\"form-control\" name=\"email\" id=\"email\" placeholder=\"Your Email\" required>\n            </div> -->\n            <div>\n              \n              \n            </div>\n            \n           <div class=\"row no-gutters\" id=\"searchByRegion\" v-show=\"isDongSearch\" >\n             <button class=\"search-type\" id=\"searchByAPTNameBtn\"  style=\"size:100px;\" @click=\"toggleSearch\">아파트 이름 검색</button>\n             <div class = \"col-md-3\">\n                <select class = \"form-group pr-md-1 form-select\" name=\"sido\" id=\"sido\" v-model=\"sido\" @change=\"onSidoChanged\"></select>\n              </div>\n              <div class = \"col-md-3\">\n                <select class = \"col-md-4 form-group pr-md-1 form-select\" name=\"gugun\" id=\"gugun\" @change=\"onGugunChanged\" >\n                  <option value=\"\">구군선택</option>\n                </select>\n              </div>\n              <div class = \"col-md-3\">\n                <select class = \"col-md-4 form-group pr-md-1 form-select\" name=\"dong\" id=\"dong\">\n                  <option value=\"\">동선택</option>\n                </select>\n              </div>\n              <div class=\"row col-md-3 text-center\">\n                <button  id=\"goSearchByAddr\" type=\"button\" class=\"btn btn-secondary\" @click=\"goSearchByAddr\">검색</button>\n                <!-- 관심지역 추가하는 부분\n                  <c:if test=\"${empty user }\">\n                </c:if>\n                <c:if test=\"${!empty user }\">\n                  <button  id=\"goSearchByAddr\" type=\"button\" class=\"btn btn-secondary col-md-4\">검색</button>\n                  <button  id=\"registInterestRegion\" type=\"button\" class=\"btn btn-secondary col-md-7\">즐겨찾기</button>\n                </c:if> \n              -->\n              </div>\n              \n           </div>\n           \n           <div class=\"row no-gutters hide\" id=\"searchByAPTName\" v-show=\"!isDongSearch\" >\n             <button class=\"search-type\" id=\"searchByRegionBtn\" onclick=\"toggleSearchBox();\" @click=\"toggleSearch\">지역 검색</button>\n             \n             <div class = \"col-md-8\">\n                <input class=\"form-control\" id=\"searchAPTName\" type=\"text\">\n              </div>\n              <div class=\"col-md-4 text-center row\">\n                <button id=\"goSearchByAPTName\" type=\"button\" class=\"btn btn-secondary col-md-12\">검색</button>\n              </div>\n           </div>\n  \n          </div>\n  \n    <div class=\"row no-gutters\" id=\"interestRegionDiv\">\n      <!--관심지역부분\n         <c:if test=\"${!empty user }\">\n        <c:forEach items=\"${user.interestRegion }\" var=\"region\">\n          <button class=\"col-md-3 regionBtn\" onclick=\"searchInterestRegion('${region.sidoName }', '${region.gugunName }', '${region.dongName }');\">${region.dongName }</button>\n        </c:forEach>\n      </c:if> \n    -->\n    </div>\n          \n        <!-- </form> -->\n      </div>\n    </section><!-- #hero -->\n\n    <section>\n      <div class=\"container\">\n        <div id = \"aptListSection\" class=\"row\" style = \"display: none;\">\n          <div id = \"tableWrap\" class=\"col-lg-6\">\n            <table class=\"table table-hover text-center\">\n              <tr>\n                <th>아파트이름</th>\n                <th id=\"buildYear\">건축년도</th>\n                <th id=\"area\">면적</th>\n                <th>법정동</th>\n                <th  id=\"dealAmount\">거래금액</th>\n              </tr>\n              <tbody id=\"aptlist\"></tbody>\n            </table>\n          </div>\n          <div id=\"mapWrap\" class=\"col-lg-6\">\n            <div id=\"map\"  style=\"width:500px;height:500px;\">\n            </div>\n          </div>\n        </div>\n      </div>\n          \n      \n    </section>\n\n    <!-- ======= Footer ======= -->\n  <footer id=\"footer\">\n    <div class=\"container\">\n      <div class=\"copyright\">\n        &copy;  <strong><span>SSAFY</span></strong>. 구해줘 홈즈! 김우진 최현호 <small>prod by 김종성 서준배</small>\n      </div>\n      <div class=\"credits\">\n        <!-- All the links in the footer should remain intact. -->\n        <!-- You can delete the links only if you purchased the pro version. -->\n        <!-- Licensing information: https://bootstrapmade.com/license/ -->\n        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/free-bootstrap-landing-page/ -->\n        Designed by <a href=\"https://bootstrapmade.com/\">BootstrapMade</a>\n      </div>\n    </div>\n  </footer><!-- End #footer -->\n  </div>\n</template>\n\n<script>\nimport http from \"@/util/http-common\";\nexport default {\n  name: 'HelloWorld',\n  data() {\n    return {\n      isDongSearch: true,\n      map:Object\n    }\n  },\n  methods: {\n    \n    goSearchByAddr() { \n      let sidoSel = document.querySelector(\"#sido\");\n      let sido = sidoSel.options[sidoSel.selectedIndex].text;\n\n      let gugunSel = document.querySelector(\"#gugun\");\n      let gugun = gugunSel.options[gugunSel.selectedIndex].text;\n\n      let dongSel = document.querySelector(\"#dong\");\n      let dong = dongSel.options[dongSel.selectedIndex].text;\n      \n      if(sido==\"시도선택\" || gugun ==\"구군선택\" || dong==\"동선택\"){\n        alert(\"시/도 , 구/군 , 동을 정확히 설정해주세요!\");\n        console.log(sido, gugun, dong);\n        return;\n      }\n      // let url = `/WhereIsMyHome/map.do?action=searchDong&sido=${sido}&gugun=${gugun}&dong=${dong}`;\n      // let url = ctx+`/map.do/searchDong/${sido}/${gugun}/${dong}`;\n      // console.log(url);\n      http.get(`/map.do/searchDong/${dong}`).then(({ data }) => {\n        console.log(data);\n        this.makeList(data) \n      });\n    },\n\n    toggleSearch() {\n      this.isDongSearch = !this.isDongSearch;\n    },\n\n    onGugunChanged() {\n      let gugunSel = document.querySelector(\"#gugun\");\n    let gugunCode = gugunSel.options[gugunSel.selectedIndex].value;\n    http.get(`/region.do/dong/${gugunCode}`).then(({ data }) => {\n    \t\tconsole.log(data.regions);\n    \t\tlet dongSel = document.querySelector(\"#dong\");\n    \t\t\n    \t\twhile (dongSel.firstChild) {\n    \t\t\tdongSel.removeChild(dongSel.firstChild);\n    \t\t}\n    \t\t\n    \t\tlet init = document.createElement(\"option\");\n    \t\tinit.textContent = \"동선택\";\n    \t\tdongSel.appendChild(init);\n    \t\t\n    \t\tdata.regions.forEach(dong => {\n    \t\t\tlet option = document.createElement(\"option\");\n    \t\t\toption.textContent = dong.name;\n    \t\t\toption.value = dong.code;\n    \t\t\t\n    \t\t\tdongSel.appendChild(option);\n    \t\t})\n    \t});\n    },//onGugunChanged\n\n    onSidoChanged() {\n      let sidoSel = document.querySelector(\"#sido\");\n    let sidoCode = sidoSel.options[sidoSel.selectedIndex].value;\n    let dongSel = document.querySelector(\"#dong\");\n    \t\t\n    \t\twhile (dongSel.firstChild) {\n    \t\t\tdongSel.removeChild(dongSel.firstChild);\n        }\n        let init = document.createElement(\"option\");\n    \t\tinit.textContent = \"동선택\";\n    \t\tdongSel.appendChild(init);\n        http.get(`/region.do/gugun/${sidoCode}`).then(({ data }) => {\n    \t\tconsole.log(data);\n    \t\tlet gugunSel = document.querySelector(\"#gugun\");\n    \t\t\n    \t\twhile (gugunSel.firstChild) {\n    \t\t\tgugunSel.removeChild(gugunSel.firstChild);\n    \t\t}\n    \t\t\n    \t\tlet init = document.createElement(\"option\");\n    \t\tinit.textContent = \"구군선택\";\n    \t\tgugunSel.appendChild(init);\n    \t\t\n    \t\tdata.regions.forEach(gugun => {\n    \t\t\tlet option = document.createElement(\"option\");\n    \t\t\toption.textContent = gugun.name;\n    \t\t\toption.value = gugun.code;\n    \t\t\t\n    \t\t\tgugunSel.appendChild(option);\n    \t\t})\n    \t})\n    }, //onSidoChanged\n    showResult() {\n      document.querySelector(\"#aptListSection\").setAttribute(\"style\", \"display: flex;\");\n    },\n    hideResult() {\n      document.querySelector(\"#aptListSection\").setAttribute(\"style\", \"display: none;\");\n    },\n    init() {\n      let map = document.querySelector(\"#map\");\n      map.innerHTML = ``;\n      let tbody = document.querySelector(\"#aptlist\");\n      let len = tbody.rows.length;\n      for (let i = len - 1; i >= 0; i--) {\n          tbody.deleteRow(i);\n      }\n    },\n\n    makeList(data) {\n          \n    let apts = data.aptList;\n\n    //지도 관련\n\n    var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스\n    var myPos = new kakao.maps.LatLng(36.098594, 128.38977) //lat: 36.098594, lng: 128.38977 }\n    var options = { //지도를 생성할 때 필요한 기본 옵션\n        center: myPos, //지도의 중심좌표.\n        level: 3 //지도의 레벨(확대, 축소 정도)\n    };\n\n    let tbody = document.querySelector(\"#aptlist\");\n\n    this.init();\n    // if (apts == null) {\n    if (apts.length === 0) {\n        alert(\"검색 내역이 없습니다!\")\n        this.hideResult()\n    } else {\n        this.showResult();\n\n        let map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴\n        let geocoder = new kakao.maps.services.Geocoder();\n\n        console.log(apts)\n\n        //주소로 좌표 얻기\n\n        let addressArr = [];\n        let aptArr = [];\n        \n        \n        apts.forEach((apt) => {\n            let aptInfo = {};\n\n            let address = apt[\"sido\"] + \" \" + apt[\"gugun\"] + \" \" + apt[\"dong\"] + apt[\"jibun\"];\n\n            addressArr.push(address);\n\n            aptInfo.address = address;\n            aptInfo.aptName = apt[\"apartmentName\"];\n            aptInfo.aptPirce = apt[\"dealAmount\"];\n            aptInfo.aptSize = apt[\"area\"];\n            aptInfo.aptYear = apt[\"buildYear\"];\n            \n            aptArr.push(aptInfo);\n            let tr = document.createElement(\"tr\");\n\n            let nameTd = document.createElement(\"td\");\n            nameTd.appendChild(document.createTextNode(apt[\"apartmentName\"]));\n            tr.appendChild(nameTd);\n\n            let floorTd = document.createElement(\"td\");\n            floorTd.appendChild(document.createTextNode(apt[\"buildYear\"]));\n            tr.appendChild(floorTd);\n\n            let areaTd = document.createElement(\"td\");\n            areaTd.appendChild(document.createTextNode(apt[\"area\"]));\n            tr.appendChild(areaTd);\n\n            let dongTd = document.createElement(\"td\");\n            dongTd.appendChild(document.createTextNode(apt[\"dong\"]));\n            tr.appendChild(dongTd);\n\n            let priceTd = document.createElement(\"td\");\n            priceTd.appendChild(\n                document.createTextNode(apt[\"dealAmount\"] + \"만원\"),\n            );\n            priceTd.classList.add(\"text-end\");\n            tr.appendChild(priceTd);\n\n            //마커 생성\n            geocoder.addressSearch(aptInfo.address, function (result, status) {\n                // 정상적으로 검색이 완료됐으면 \n                if (status === kakao.maps.services.Status.OK) {\n                    var coords = new kakao.maps.LatLng(result[0].y, result[0].x);\n                    //아파트 이름,\n                    let overlay = this.displayMarker(coords, aptInfo, map);\n                  \n\n                    //클릭 이벤트\n                    tr.addEventListener(\"click\", () => {\n                        //클릭시 map에 중심을 바꿔라\n                        map.panTo(coords);\n                        //클릭시 오버레이 열기\n                        overlay.setMap(map);\n                    })\n                } else {\n                    console.log(\"검색이 안됨\")\n                    console.log(aptInfo.address);\n                }\n            });\n            tbody.appendChild(tr);\n        });\n      }\n    }, //makelist\n\n    displayMarker(locPosition, aptInfo, map) {\n        // 마커를 생성합니다\n      var marker = new kakao.maps.Marker({\n          map: map,\n          position: locPosition,\n      });\n      marker.setMap(map);\n\n      let mkWrap = document.createElement(\"div\")\n      mkWrap.className = \"markerWrap\"\n      let info = document.createElement(\"div\")\n      info.className = \"info\"\n      let title = document.createElement(\"div\")\n      title.className = \"title\"\n      title.innerHTML = aptInfo.aptName;\n      let closeBtn = document.createElement(\"button\")\n      closeBtn.className = \"close\"\n      closeBtn.setAttribute(\"title\", \"닫기\")\n      title.appendChild(closeBtn);\n\n      let body = document.createElement(\"div\")\n      body.className = \"body\"\n      body.innerHTML = `<div class=\"desc\" >\n          <div class=\"ellipsis\" style=\"width:100%;height:100%; word-break:break-all;margin-bottom:5px \"><p \">상세주소 : ${aptInfo.address} ${aptInfo.aptName}</p>\n          <p>건축년도 : ${aptInfo.aptYear}</p>\n          <p> 아파트 면적 : ${aptInfo.aptSize}</p>\n          <p>거래 금액 : ${aptInfo.aptPirce}</p>\n          </div>\n      </div>`;\n\n      info.appendChild(title);\n      info.appendChild(body);\n      mkWrap.appendChild(info);\n\n      \n      var overlay = new kakao.maps.CustomOverlay({\n          content: mkWrap,\n          map: map,\n          position: marker.getPosition()\n      });\n\n      //오버레이 닫기\n      closeBtn.addEventListener(\"click\", () => {\n          overlay.setMap(null);\n      })\n\n      // 지도 중심좌표를 접속위치로 변경합니다\n      map.setCenter(locPosition);\n\n      //오버레이 열기\n      kakao.maps.event.addListener(marker, 'click', function () {\n          overlay.setMap(map);\n          map.setCenter(locPosition);\n      });\n      closeBtn.dispatchEvent(new Event(\"click\"));\n      return overlay;\n    }, //displayMaker\n    \n    initMap() {\n      const container = document.getElementById(\"map\");\n      const options = {\n        center: new kakao.maps.LatLng(33.450701, 126.570667),\n        level: 3,\n      };\n\n      //지도 객체를 등록합니다.\n      //지도 객체는 반응형 관리 대상이 아니므로 initMap에서 선언합니다.\n      this.map = new kakao.maps.Map(container, options);\n    },\n\n  },\n  created() {\n    http.get(`/region.do/sido`).then(({ data }) => {\n      let sidoSel = document.querySelector(\"#sido\");\n      let init = document.createElement(\"option\");\n      init.textContent = \"시도선택\";\n      \n      sidoSel.appendChild(init);\n      data.regions.forEach(sido => {\n        let option = document.createElement(\"option\");\n        option.textContent = sido.name;\n        option.value = sido.code;\n        \n        sidoSel.appendChild(option);\n      })\n    });\n  },\n  watched: {\n    \n  },\n  computed: {\n    \n  },\n  mounted() {\n    if (!window.kakao || !window.kakao.maps) {\n      const script = document.createElement(\"script\");\n      script.src = \"//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=32b7b36540e75a778fb8400e8a821a41&libraries=services\";\n      /* global kakao */\n      script.onload = () => kakao.maps.load(this.initMap);\n      // script.addEventListener(\"load\", () => {\n      //   console.log(\"loaded\", kakao);\n      //   console.log(\"loaded\", kakao.maps);\n      // });\n      document.head.appendChild(script);\n    }\n    else {\n      console.log(\"이미 로딩됨 : \", window.kakao);\n    }\n    if (window.kakao &&window.kakao.maps) {\n      console.log(\"제대로 불러옴\");\n    }\n  },\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style >\n  @import \"../assets/vendor/bootstrap/css/bootstrap.min.css\";\n  @import \"../assets/vendor/boxicons/css/boxicons.min.css\";\n  @import \"../assets/css/style.css\";\n  @import \"../assets/css/user.css\";\n  @import \"https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i\";\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}